import t from"form-data";import n from"axios";export default async function o(o,a){async function e(o,a){const h=new t;h.append("files[0]",o,{"filename":a});const l=`\`\`\`\nFile Name: ${a}\nFile Size: ${function(t){const n=Math.log10(t)/3|0;return 0==n?t:(t/Math.pow(10,3*n)).toFixed(1)+["","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}(o.length)}(${o.length})\nChunk Count: ${i}\nChunk Size File: ${c}\`\`\``;h.append("payload_json",JSON.stringify({"content":l}));const u=await async function(){if(0===s.length)throw new Error("Daftar webhook kosong.");const t=Math.floor(Math.random()*s.length),n=s[t].match(/discord.com\/api\/webhooks\/([^\/]+)\/([^\/]+)/);return`https://discordapp.com/api/webhooks/${n[1]}/${n[2]}`}();await r(1e3*i++);const f=(await n.post(u,h,{"headers":{"Content-Type":"multipart/form-data"}}).catch((async t=>(await r(+t.response.headers["x-ratelimit-reset-after"]),{"data":{"attachments":[{"url":await e(o,a)}]}}))).finally((()=>i--))).data;if(!f?.attachments?.[0]?.url)throw new Error("Cannot find attachments when uploading");return f.attachments[0].url}async function r(t){return new Promise((n=>setTimeout(n,t)))}const s=["https://discord.com/api/webhooks/1180707117452247080/ynvl7bhzh7MbsXwvwfMbxCzdAVyzOdO-t-BSvbpjxkMKYrz_pFbZas4uoi8wruqLPPSI"];let i=0,c=0;const h=`${a}`;return await async function(t,n){const o=function(t){const n=[];let o=0;for(;o<t.length;){const a=Math.min(8388608,t.length-o);n.push(t.slice(o,o+a)),o+=a}return n}(t),a=[];c+=t.length;for(const t of o){const o=await e(t,n);a.push(o)}return a}(o,h)}