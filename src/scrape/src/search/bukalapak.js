import r from"axios";import t from"cheerio";export default function i(i){return new Promise((async e=>{try{const{"data":a}=await r.get(`https://www.bukalapak.com/products?from=omnisearch&from_keyword_history=false&search[keywords]=${i}&search_source=omnisearch_keyword&source=navbar`,{"headers":{"user-agent":"Mozilla/ 5.0(Windows NT 10.0 Win64 x64 rv: 108.0) Gecko / 20100101 Firefox / 108.0"}}),d=t.load(a),o=[];if(d("a.slide > img").attr("src"),d("div.bl-flex-item.mb-8").each(((r,t)=>{const i=d(t).find("observer-tracker > div > div"),e=d(i).find("div > a > img").attr("src");if(void 0===e)return;const a=d(i).find(".bl-thumbnail--slider > div > a").attr("href"),n=d(i).find(".bl-product-card__description-name > p > a").text().trim(),s=d(i).find("div.bl-product-card__description-price > p").text().trim(),c=d(i).find("div.bl-product-card__description-rating > p").text().trim(),p=d(i).find("div.bl-product-card__description-rating-and-sold > p").text().trim(),l=d(i).find("div.bl-product-card__description-store > span:nth-child(1)").text().trim(),m=d(i).find("div.bl-product-card__description-store > span > a").text().trim(),f=d(i).find("div.bl-product-card__description-store > span > a").attr("href");o.push({"title":n,"rating":c||"No rating yet","terjual":p||"Not yet bought","harga":s,"image":e,"link":a,"store":{"lokasi":l,"nama":m,"link":f}})})),o.every((r=>void 0===r)))return e({"message":"Tidak ada result!"});e(o)}catch(r){console.error(r)}}))}