function e(e,o){return new Promise((async _=>{try{if(!/^https?:\/\//.test(e)||!/x\.com|twitter\.com/i.test(e))throw new Error("Invalid URL: "+e);const l=e.match(/\/([\d]+)/);if(!l)return _({"status":"error","msg":"There was an error getting twitter id. Make sure your twitter url is correct!"});const c=await(async()=>{try{const{"data":e}=await t("https://api.twitter.com/1.1/guest/activate.json",{"method":"POST","headers":{"Authorization":await s(),...i()}});return e.guest_token}catch{return null}})(),u=o?.cookie?o.cookie.match(/(?:^|; )ct0=([^;]*)/):"";if(!c)return _({"status":"error","msg":"Failed to get Guest Token. Authorization is invalid!"});await t.get("https://api.twitter.com/graphql/7xflPyRiUxGVbJd4uWmbfg/TweetResultByRestId",{"params":{"variables":JSON.stringify({"tweetId":l[1],"withCommunity":!1,"includePromotedContent":!1,"withVoice":!1}),"features":JSON.stringify(a),"fieldToggles":JSON.stringify({"withArticleRichContentState":!0,"withArticlePlainText":!1})},"headers":{"Authorization":o?.authorization?o.authorization:await r(),"Cookie":o?.cookie?o.cookie:"","x-csrf-token":u?u[1]:"","x-guest-token":c,...i()}}).then((({"data":e})=>{if(!e.data.tweetResult?.result)return _({"status":200,"msg":"Tweet not found!"});if("NsfwLoggedOut"===e.data.tweetResult.result?.reason)return _({"status":404,"msg":"This tweet contains sensitive content! Please use cookies to avoid errors!"});const t="TweetWithVisibilityResults"===e.data.tweetResult.result.__typename?e.data.tweetResult.result.tweet:e.data.tweetResult.result,i={"replieCount":t.legacy.reply_count,"retweetCount":t.legacy.retweet_count,"favoriteCount":t.legacy.favorite_count,"viewCount":Number(t.views.count)},a=t.core.user_results.result,s={"username":a.legacy.screen_name,"bio":a.legacy.description,"possiblySensitive":a.legacy.possibly_sensitive,"verified":a.legacy.verified,"location":a.legacy.location,"profileBannerUrl":a.legacy.profile_banner_url,"profileImageUrl":a.legacy.profile_image_url_https,"url":"https://twitter.com/"+a.legacy.screen_name,"statistics":{"favoriteCount":a.legacy.favourites_count,"followersCount":a.legacy.followers_count,"friendsCount":a.legacy.friends_count,"statusesCount":a.legacy.statuses_count,"listedCount":a.legacy.listed_count,"mediaCount":a.legacy.media_count}},r=t.legacy?.entities?.media?.map((e=>{if("photo"===e.type)return{"type":e.type,"image":e.media_url_https,"expandedUrl":e.expanded_url};{const t="animated_gif"===e.type,i=e.video_info.variants.filter((e=>"video/mp4"===e.content_type)).map((i=>{let a=t?`${e.original_info.width}x${e.original_info.height}`:i.url.match(/\/([\d]+x[\d]+)\//)[1];return{"bitrate":i.bitrate,"content_type":i.content_type,"quality":a,"url":i.url}}));return{"type":e.type,"cover":e.media_url_https,"duration":n(e.video_info.duration_millis),"expandedUrl":e.expanded_url,"videos":i}}}))||[];_({"id":t.legacy.id_str,"createdAt":t.legacy.created_at,"description":t.legacy.full_text,"languange":t.legacy.lang,"possiblySensitive":t.legacy.possibly_sensitive||!1,"possiblySensitiveEditable":t.legacy.possibly_sensitive_editable||!1,"isQuoteStatus":t.legacy.is_quote_status,"mediaCount":r.length,"author":s,"statistics":i,"media":r})})).catch((e=>_({"msg":e?.message||e})))}catch(e){_({"msg":e?.message||e})}}))}import t from"axios";import i from"../../../lib/headers.js";const a={"creator_subscriptions_tweet_preview_api_enabled":!0,"communities_web_enable_tweet_community_results_fetch":!0,"c9s_tweet_anatomy_moderator_badge_enabled":!0,"articles_preview_enabled":!0,"tweetypie_unmention_optimization_enabled":!0,"responsive_web_edit_tweet_api_enabled":!0,"graphql_is_translatable_rweb_tweet_is_translatable_enabled":!0,"view_counts_everywhere_api_enabled":!0,"longform_notetweets_consumption_enabled":!0,"responsive_web_twitter_article_tweet_consumption_enabled":!0,"tweet_awards_web_tipping_enabled":!1,"creator_subscriptions_quote_tweet_preview_enabled":!1,"freedom_of_speech_not_reach_fetch_enabled":!0,"standardized_nudges_misinfo":!0,"tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled":!0,"tweet_with_visibility_results_prefer_gql_media_interstitial_enabled":!0,"rweb_video_timestamps_enabled":!0,"longform_notetweets_rich_text_read_enabled":!0,"longform_notetweets_inline_media_enabled":!0,"rweb_tipjar_consumption_enabled":!0,"responsive_web_graphql_exclude_directive_enabled":!0,"verified_phone_label_enabled":!1,"responsive_web_graphql_skip_user_profile_image_extensions_enabled":!1,"responsive_web_graphql_timeline_navigation_enabled":!0,"responsive_web_enhance_cards_enabled":!1},n=e=>{const t=Math.floor(e/6e4),i=(e%6e4/1e3).toFixed(0);return`${t}:${Number(i)<10?"0":""}${i}`},s=async()=>{const{"data":e}=await t.get("https://pastebin.com/raw/nz3ApKQM");return e},r=async()=>{const{"data":e}=await t.get("https://pastebin.com/raw/Bu7XFnpE");return e};export default e;