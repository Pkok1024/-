import r from"express";import o from"cors";import{fileURLToPath as t}from"url";import e,{dirname as s}from"path";import a from"fs";const i=s(t(import.meta.url)),f=r.Router();f.use(o());const n=async r=>{try{const o=await import(`./api/${r}.js`);o.default&&"function"==typeof o.default?f.use(`/${r}`,o.default):console.error(`No valid default function found in ${r}`)}catch(o){console.error(`Error importing routes from ${r}:`,o)}};(async()=>{try{const r=await a.promises.readdir(e.resolve(i,"api"));for(const o of r.filter((r=>r.endsWith(".js")&&"router.js"!==r)))await n(o.replace(".js",""))}catch(r){console.error("Error reading route modules:",r)}})();export default f;