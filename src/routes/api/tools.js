import a from"express";import*as e from"../../scrape/index.js";import r from"../../middlewares/apiKeyMiddleware.js";import t from"user-agents";const s=a.Router(),n=(a,e,r,t)=>{a.setHeader("Content-Type",t),"application/json"===t?a.json({"status":"Success","code":e,"author":author,"data":r}):a.send(r)},i=(a,e,r)=>{a.status(e).json({"error":r})};s.get("/:feature",r,(async(a,r)=>{try{const{"feature":s}=a.params,o=a.query;let l;switch(s){case"translate":if(!o.lang||!o.text)return i(r,400,"Invalid parameters. Both lang and text are required.");l=await e.translate(o.lang,o.text),n(r,200,l,"application/json");break;case"cuaca":if(!o.kota)return i(r,400,"Invalid parameters.");l=await e.cuaca(o.kota),n(r,200,l,"application/json");break;case"saucenao":if(!o.url)return i(r,400,"Invalid parameters.");l=await e.saucenao(o.url),n(r,200,l,"application/json");break;case"styletext":if(!o.q)return i(r,400,"Invalid parameters.");l=await e.styleText(o.q),n(r,200,l,"application/json");break;case"removebg":if(!o.url)return i(r,400,"Invalid parameters.");const a=await e.removeBg(o.url);n(r,200,a,"image/jpeg");break;case"ssweb":if(!o.url)return i(r,400,"Invalid parameters.");const s=await e.ssweb(o.url);n(r,200,s,"image/jpeg");break;case"sinonim":if(!o.kata)return i(r,400,"Invalid parameters.");l=await e.sinonim(o.kata),n(r,200,l,"application/json");break;case"apkmsearch":if(!o.query)return i(r,400,"Invalid parameters.");l=await e.apkmS(o.query),n(r,200,l,"application/json");break;case"githubstalk":if(!o.username)return i(r,400,"Invalid parameters.");l=await e.gstalk(o.username),n(r,200,l,"application/json");break;case"langList":l=await e.langList(),n(r,200,l,"application/json");break;case"userAgents":l=JSON.stringify((new t).data),n(r,200,l,"application/json");break;case"anti-porn":if(!o.url)return i(r,400,"Parameter url tidak ditemukan");l=await e.cekGambar(o.url),n(r,200,l,"application/json");break;default:return i(r,404,"Invalid feature.")}}catch(a){console.error(a),i(r,500,"Internal server error.")}}));export default s;