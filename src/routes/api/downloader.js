import a from"express";import{fetchJson as e}from"../../lib/function.js";import*as t from"../../scrape/index.js";import r from"../../middlewares/apiKeyMiddleware.js";const i=a.Router(),s=(a,e,t)=>{a.status(e).json({"error":t})};i.get("/:source",r,(async(a,r)=>{const i=a.query.url;if(!i)return s(r,400,"Parameter url tidak ditemukan");let o;switch(a.params.source.toLowerCase()){case"tiktok":o=await(await e(`https://xorizn-downloads.vercel.app/api/downloads/tiktok?url=${i}`)).result;break;case"mediafire":o=await t.mediafire(i);break;case"facebook":o=await t.facebook(i);break;case"terabox":o=await(await t.terabox(i)).list;break;case"instagram":case"igstory":case"igtv":o=await t.snapSave(i);break;case"igstory2":o=await t.igStory(i);break;case"ttslide":o=await t.ttSlide(i);break;case"twitter":o=await t.twitterDl(i);break;case"capcut":o=await t.capcutDl(i);break;case"spotify":o=await t.spotifyDl(i);break;case"sfile":o=await t.sfileDl(i);break;case"dvadownloader":o=await t.scrapeAppUrl(i);break;case"gdrive":o=await t.GDriveDl(i);break;case"apkmirror":o=await t.apkmD(i);break;case"xnxx":o=await t.xnxxDownloader(i);break;default:return s(r,400,"Features not found")}if(!o)return s(r,400,"Tidak ada data yang ditemukan");((a,e,t)=>{a.json({"status":"Success","code":200,"author":author,"data":t})})(r,0,o)}));export default i;