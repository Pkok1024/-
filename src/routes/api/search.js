import a from"express";import*as e from"../../scrape/index.js";import r from"../../middlewares/apiKeyMiddleware.js";const t=a.Router(),s=(a,e,r)=>{a.json({"status":"Success","code":e,"data":r})},i=(a,e,r)=>{a.status(e).json({"error":r})},o=(a,e)=>!a.q&&(i(e,400,'Query parameter "q" is required.'),!0);t.get("/xvideos",r,(async(a,r)=>{try{const{"query":t,"short":i,"date":o,"duration":u,"quality":n,"page":c}=a.query,d=await e.xvideoS(t,i,o,u,n,c);s(r,200,d)}catch(a){console.error(a),r.status(500).json({"error":"Internal Server Error"})}})),t.get("/:feature",r,(async(a,r,t)=>{const{"feature":u}=a.params,n=a.query;let c;try{switch(u){case"youtube":if(o(n,r))return;c=await e.youtube(n.q);break;case"xnxx":if(o(n,r))return;c=await e.xnxxSearch(n.q);break;case"dvasearch":if(o(n,r))return;c=await e.scrapeGameData(n.q);break;case"komikcast":if(o(n,r))return;c=await e.KomikCast(n.q);break;case"wikipedia":if(o(n,r))return;c=await e.wikipedia(n.q);break;case"bukalapak":if(o(n,r))return;c=await e.bukalapak(n.q);break;case"tiktoks":if(o(n,r))return;c=await e.tiktoks(n.q);break;default:r.status(404).json({"error":"Invalid feature."})}if(!n.q)return i(r,400,"Tidak ada data yang ditemukan");s(r,200,c)}catch(a){t(a)}}));export default t;