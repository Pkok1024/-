import r from"express";import e from"fs";import{join as s}from"path";import o from"axios";import t from"../../middlewares/apiKeyMiddleware.js";const a=r.Router(),p=s(process.cwd(),"/src/scrape/data/sfw");a.get("/:sfw",t,(async(r,t)=>{try{const{"sfw":a}=r.params,n=s(p,`${a}.json`),i=JSON.parse(e.readFileSync(n)),m=i[Math.floor(Math.random()*i.length)],d=await o.get(m,{"responseType":"stream"});t.setHeader("Content-Type","image/jpeg"),d.data.pipe(t)}catch(r){console.error("Error in handling '/:sfw' endpoint:",r),t.status(500).json({"status":"Error","code":500,"message":"Internal Server Error"})}}));export default a;