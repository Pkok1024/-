!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).GLightbox=factory()}(this,(function(){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var uid=Date.now();function extend(){var extended={},deep=!0,i=0,length=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(deep=arguments[0],i++);for(var merge=function(obj){for(var prop in obj)Object.prototype.hasOwnProperty.call(obj,prop)&&(deep&&"[object Object]"===Object.prototype.toString.call(obj[prop])?extended[prop]=extend(!0,extended[prop],obj[prop]):extended[prop]=obj[prop])};i<length;i++){merge(arguments[i])}return extended}function each(collection,callback){if((isNode(collection)||collection===window||collection===document)&&(collection=[collection]),isArrayLike(collection)||isObject(collection)||(collection=[collection]),0!=size(collection))if(isArrayLike(collection)&&!isObject(collection))for(var l=collection.length,i=0;i<l&&!1!==callback.call(collection[i],collection[i],i,collection);i++);else if(isObject(collection))for(var key in collection)if(has(collection,key)&&!1===callback.call(collection[key],collection[key],key,collection))break}function getNodeEvents(node){var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,fn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,cache=node[uid]=node[uid]||[],data={all:cache,evt:null,found:null};return name&&fn&&size(cache)>0&&each(cache,(function(cl,i){if(cl.eventName==name&&cl.fn.toString()==fn.toString())return data.found=!0,data.evt=i,!1})),data}function addEvent(eventName){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},onElement=_ref.onElement,withCallback=_ref.withCallback,_ref$avoidDuplicate=_ref.avoidDuplicate,avoidDuplicate=void 0===_ref$avoidDuplicate||_ref$avoidDuplicate,_ref$once=_ref.once,once=void 0!==_ref$once&&_ref$once,_ref$useCapture=_ref.useCapture,useCapture=void 0!==_ref$useCapture&&_ref$useCapture,thisArg=arguments.length>2?arguments[2]:void 0,element=onElement||[];function handler(event){isFunction(withCallback)&&withCallback.call(thisArg,event,this),once&&handler.destroy()}return isString(element)&&(element=document.querySelectorAll(element)),handler.destroy=function(){each(element,(function(el){var events=getNodeEvents(el,eventName,handler);events.found&&events.all.splice(events.evt,1),el.removeEventListener&&el.removeEventListener(eventName,handler,useCapture)}))},each(element,(function(el){var events=getNodeEvents(el,eventName,handler);(el.addEventListener&&avoidDuplicate&&!events.found||!avoidDuplicate)&&(el.addEventListener(eventName,handler,useCapture),events.all.push({eventName:eventName,fn:handler}))})),handler}function addClass(node,name){each(name.split(" "),(function(cl){return node.classList.add(cl)}))}function removeClass(node,name){each(name.split(" "),(function(cl){return node.classList.remove(cl)}))}function hasClass(node,name){return node.classList.contains(name)}function closest(elem,selector){for(;elem!==document.body;){if(!(elem=elem.parentElement))return!1;if("function"==typeof elem.matches?elem.matches(selector):elem.msMatchesSelector(selector))return elem}}function animateElement(element){var animation=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",callback=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!element||""===animation)return!1;if("none"===animation)return isFunction(callback)&&callback(),!1;var animationEnd=function(){var t,el=document.createElement("fakeelement"),animations={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in animations)if(void 0!==el.style[t])return animations[t]}(),animationNames=animation.split(" ");each(animationNames,(function(name){addClass(element,"g"+name)})),addEvent(animationEnd,{onElement:element,avoidDuplicate:!1,once:!0,withCallback:function(event,target){each(animationNames,(function(name){removeClass(target,"g"+name)})),isFunction(callback)&&callback()}})}function cssTransform(node){var translate=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""===translate)return node.style.webkitTransform="",node.style.MozTransform="",node.style.msTransform="",node.style.OTransform="",node.style.transform="",!1;node.style.webkitTransform=translate,node.style.MozTransform=translate,node.style.msTransform=translate,node.style.OTransform=translate,node.style.transform=translate}function show(element){element.style.display="block"}function hide(element){element.style.display="none"}function createHTML(htmlStr){var frag=document.createDocumentFragment(),temp=document.createElement("div");for(temp.innerHTML=htmlStr;temp.firstChild;)frag.appendChild(temp.firstChild);return frag}function windowSize(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function waitUntil(check,onComplete,delay,timeout){if(check())onComplete();else{var timeoutPointer;delay||(delay=100);var intervalPointer=setInterval((function(){check()&&(clearInterval(intervalPointer),timeoutPointer&&clearTimeout(timeoutPointer),onComplete())}),delay);timeout&&(timeoutPointer=setTimeout((function(){clearInterval(intervalPointer)}),timeout))}}function injectAssets(url,waitFor,callback){if(isNil(url))console.error("Inject assets error");else if(isFunction(waitFor)&&(callback=waitFor,waitFor=!1),isString(waitFor)&&waitFor in window)isFunction(callback)&&callback();else{var found;if(-1!==url.indexOf(".css")){if((found=document.querySelectorAll('link[href="'+url+'"]'))&&found.length>0)return void(isFunction(callback)&&callback());var head=document.getElementsByTagName("head")[0],headStyles=head.querySelectorAll('link[rel="stylesheet"]'),link=document.createElement("link");return link.rel="stylesheet",link.type="text/css",link.href=url,link.media="all",headStyles?head.insertBefore(link,headStyles[0]):head.appendChild(link),void(isFunction(callback)&&callback())}if((found=document.querySelectorAll('script[src="'+url+'"]'))&&found.length>0){if(isFunction(callback)){if(isString(waitFor))return waitUntil((function(){return void 0!==window[waitFor]}),(function(){callback()})),!1;callback()}}else{var script=document.createElement("script");script.type="text/javascript",script.src=url,script.onload=function(){if(isFunction(callback)){if(isString(waitFor))return waitUntil((function(){return void 0!==window[waitFor]}),(function(){callback()})),!1;callback()}},document.body.appendChild(script)}}}function isMobile(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function isFunction(f){return"function"==typeof f}function isString(s){return"string"==typeof s}function isNode(el){return!(!el||!el.nodeType||1!=el.nodeType)}function isArray(ar){return Array.isArray(ar)}function isArrayLike(ar){return ar&&ar.length&&isFinite(ar.length)}function isObject(o){return"object"===_typeof(o)&&null!=o&&!isFunction(o)&&!isArray(o)}function isNil(o){return null==o}function has(obj,key){return null!==obj&&hasOwnProperty.call(obj,key)}function size(o){if(isObject(o)){if(o.keys)return o.keys().length;var l=0;for(var k in o)has(o,k)&&l++;return l}return o.length}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function getNextFocusElement(){var current=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,btns=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!btns.length)return!1;if(1==btns.length)return btns[0];"string"==typeof current&&(current=parseInt(current));var orders=[];each(btns,(function(btn){orders.push(btn.getAttribute("data-taborder"))}));var highestOrder=Math.max.apply(Math,orders.map((function(order){return parseInt(order)}))),newIndex=current<0?1:current+1;newIndex>highestOrder&&(newIndex="1");var nextFocus=orders.filter((function(el){return el>=parseInt(newIndex)})).sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(nextFocus,'"]'))}function getLen(v){return Math.sqrt(v.x*v.x+v.y*v.y)}function getRotateAngle(v1,v2){var angle=function(v1,v2){var mr=getLen(v1)*getLen(v2);if(0===mr)return 0;var r=function(v1,v2){return v1.x*v2.x+v1.y*v2.y}(v1,v2)/mr;return r>1&&(r=1),Math.acos(r)}(v1,v2);return function(v1,v2){return v1.x*v2.y-v2.x*v1.y}(v1,v2)>0&&(angle*=-1),180*angle/Math.PI}var EventsHandlerAdmin=function(){function EventsHandlerAdmin(el){_classCallCheck(this,EventsHandlerAdmin),this.handlers=[],this.el=el}return _createClass(EventsHandlerAdmin,[{key:"add",value:function(handler){this.handlers.push(handler)}},{key:"del",value:function(handler){handler||(this.handlers=[]);for(var i=this.handlers.length;i>=0;i--)this.handlers[i]===handler&&this.handlers.splice(i,1)}},{key:"dispatch",value:function(){for(var i=0,len=this.handlers.length;i<len;i++){var handler=this.handlers[i];"function"==typeof handler&&handler.apply(this.el,arguments)}}}]),EventsHandlerAdmin}();function wrapFunc(el,handler){var EventshandlerAdmin=new EventsHandlerAdmin(el);return EventshandlerAdmin.add(handler),EventshandlerAdmin}var TouchEvents=function(){function TouchEvents(el,option){_classCallCheck(this,TouchEvents),this.element="string"==typeof el?document.querySelector(el):el,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var noop=function(){};this.rotate=wrapFunc(this.element,option.rotate||noop),this.touchStart=wrapFunc(this.element,option.touchStart||noop),this.multipointStart=wrapFunc(this.element,option.multipointStart||noop),this.multipointEnd=wrapFunc(this.element,option.multipointEnd||noop),this.pinch=wrapFunc(this.element,option.pinch||noop),this.swipe=wrapFunc(this.element,option.swipe||noop),this.tap=wrapFunc(this.element,option.tap||noop),this.doubleTap=wrapFunc(this.element,option.doubleTap||noop),this.longTap=wrapFunc(this.element,option.longTap||noop),this.singleTap=wrapFunc(this.element,option.singleTap||noop),this.pressMove=wrapFunc(this.element,option.pressMove||noop),this.twoFingerPressMove=wrapFunc(this.element,option.twoFingerPressMove||noop),this.touchMove=wrapFunc(this.element,option.touchMove||noop),this.touchEnd=wrapFunc(this.element,option.touchEnd||noop),this.touchCancel=wrapFunc(this.element,option.touchCancel||noop),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}}return _createClass(TouchEvents,[{key:"start",value:function(evt){if(evt.touches){if(evt.target&&evt.target.nodeName&&["a","button","input"].indexOf(evt.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",evt.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=evt.touches[0].pageX,this.y1=evt.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(evt,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var preV=this.preV;if(evt.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var v={x:evt.touches[1].pageX-this.x1,y:evt.touches[1].pageY-this.y1};preV.x=v.x,preV.y=v.y,this.pinchStartLen=getLen(preV),this.multipointStart.dispatch(evt,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(evt,this.element),this._preventTap=!0}.bind(this),750)}}}},{key:"move",value:function(evt){if(evt.touches){var preV=this.preV,len=evt.touches.length,currentX=evt.touches[0].pageX,currentY=evt.touches[0].pageY;if(this.isDoubleTap=!1,len>1){var sCurrentX=evt.touches[1].pageX,sCurrentY=evt.touches[1].pageY,v={x:evt.touches[1].pageX-currentX,y:evt.touches[1].pageY-currentY};null!==preV.x&&(this.pinchStartLen>0&&(evt.zoom=getLen(v)/this.pinchStartLen,this.pinch.dispatch(evt,this.element)),evt.angle=getRotateAngle(v,preV),this.rotate.dispatch(evt,this.element)),preV.x=v.x,preV.y=v.y,null!==this.x2&&null!==this.sx2?(evt.deltaX=(currentX-this.x2+sCurrentX-this.sx2)/2,evt.deltaY=(currentY-this.y2+sCurrentY-this.sy2)/2):(evt.deltaX=0,evt.deltaY=0),this.twoFingerPressMove.dispatch(evt,this.element),this.sx2=sCurrentX,this.sy2=sCurrentY}else{if(null!==this.x2){evt.deltaX=currentX-this.x2,evt.deltaY=currentY-this.y2;var movedX=Math.abs(this.x1-this.x2),movedY=Math.abs(this.y1-this.y2);(movedX>10||movedY>10)&&(this._preventTap=!0)}else evt.deltaX=0,evt.deltaY=0;this.pressMove.dispatch(evt,this.element)}this.touchMove.dispatch(evt,this.element),this._cancelLongTap(),this.x2=currentX,this.y2=currentY,len>1&&evt.preventDefault()}}},{key:"end",value:function(evt){if(evt.changedTouches){this._cancelLongTap();var self=this;evt.touches.length<2&&(this.multipointEnd.dispatch(evt,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(evt.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){self.swipe.dispatch(evt,self.element)}),0)):(this.tapTimeout=setTimeout((function(){self._preventTap||self.tap.dispatch(evt,self.element),self.isDoubleTap&&(self.doubleTap.dispatch(evt,self.element),self.isDoubleTap=!1)}),0),self.isDoubleTap||(self.singleTapTimeout=setTimeout((function(){self.singleTap.dispatch(evt,self.element)}),250))),this.touchEnd.dispatch(evt,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(evt){this.cancelAll(),this.touchCancel.dispatch(evt,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(x1,x2,y1,y2){return Math.abs(x1-x2)>=Math.abs(y1-y2)?x1-x2>0?"Left":"Right":y1-y2>0?"Up":"Down"}},{key:"on",value:function(evt,handler){this[evt]&&this[evt].add(handler)}},{key:"off",value:function(evt,handler){this[evt]&&this[evt].del(handler)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]),TouchEvents}();function resetSlideMove(slide){var transitionEnd=function(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}(),windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,media=hasClass(slide,"gslide-media")?slide:slide.querySelector(".gslide-media"),container=closest(media,".ginner-container"),desc=slide.querySelector(".gslide-description");windowWidth>769&&(media=container),addClass(media,"greset"),cssTransform(media,"translate3d(0, 0, 0)"),addEvent(transitionEnd,{onElement:media,once:!0,withCallback:function(event,target){removeClass(media,"greset")}}),media.style.opacity="",desc&&(desc.style.opacity="")}var ZoomImages=function(){function ZoomImages(el,slide){var _this=this,onclose=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(_classCallCheck(this,ZoomImages),this.img=el,this.slide=slide,this.onclose=onclose,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",(function(e){return _this.dragStart(e)}),!1),this.img.addEventListener("mouseup",(function(e){return _this.dragEnd(e)}),!1),this.img.addEventListener("mousemove",(function(e){return _this.drag(e)}),!1),this.img.addEventListener("click",(function(e){return _this.slide.classList.contains("dragging-nav")?(_this.zoomOut(),!1):_this.zoomedIn?void(_this.zoomedIn&&!_this.dragging&&_this.zoomOut()):_this.zoomIn()}),!1),this.img.setZoomEvents=!0}return _createClass(ZoomImages,[{key:"zoomIn",value:function(){var winWidth=this.widowWidth();if(!(this.zoomedIn||winWidth<=768)){var img=this.img;if(img.setAttribute("data-style",img.getAttribute("style")),img.style.maxWidth=img.naturalWidth+"px",img.style.maxHeight=img.naturalHeight+"px",img.naturalWidth>winWidth){var centerX=winWidth/2-img.naturalWidth/2;this.setTranslate(this.img.parentNode,centerX,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&"function"==typeof this.onclose&&this.onclose()}},{key:"dragStart",value:function(e){e.preventDefault(),this.zoomedIn?("touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset):(this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset),e.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(e){var _this2=this;e.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout((function(){_this2.dragging=!1,_this2.img.isDragging=!1,_this2.img.classList.remove("dragging")}),100)}},{key:"drag",value:function(e){this.active&&(e.preventDefault(),"touchmove"===e.type?(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY):(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(e){if(this.zoomedIn){var xOffset=e.clientX-this.img.naturalWidth/2,yOffset=e.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,xOffset,yOffset)}}},{key:"setTranslate",value:function(node,xPos,yPos){node.style.transform="translate3d("+xPos+"px, "+yPos+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),ZoomImages}(),DragSlides=function(){function DragSlides(){var _this=this,config=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,DragSlides);var dragEl=config.dragEl,_config$toleranceX=config.toleranceX,toleranceX=void 0===_config$toleranceX?40:_config$toleranceX,_config$toleranceY=config.toleranceY,toleranceY=void 0===_config$toleranceY?65:_config$toleranceY,_config$slide=config.slide,slide=void 0===_config$slide?null:_config$slide,_config$instance=config.instance,instance=void 0===_config$instance?null:_config$instance;this.el=dragEl,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=toleranceX,this.toleranceY=toleranceY,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=slide,this.instance=instance,this.el.addEventListener("mousedown",(function(e){return _this.dragStart(e)}),!1),this.el.addEventListener("mouseup",(function(e){return _this.dragEnd(e)}),!1),this.el.addEventListener("mousemove",(function(e){return _this.drag(e)}),!1)}return _createClass(DragSlides,[{key:"dragStart",value:function(e){if(this.slide.classList.contains("zoomed"))this.active=!1;else{"touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset):(this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset);var clicked=e.target.nodeName.toLowerCase();e.target.classList.contains("nodrag")||closest(e.target,".nodrag")||-1!==["input","select","textarea","button","a"].indexOf(clicked)?this.active=!1:(e.preventDefault(),(e.target===this.el||"img"!==clicked&&closest(e.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=closest(e.target,".ginner-container")))}}},{key:"dragEnd",value:function(e){var _this2=this;e&&e.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,"right"==this.doSlideChange&&this.instance.prevSlide(),"left"==this.doSlideChange&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout((function(){_this2.instance.preventOutsideClick=!1,_this2.toleranceReached=!1,_this2.lastDirection=null,_this2.dragging=!1,_this2.el.isDragging=!1,_this2.el.classList.remove("dragging"),_this2.slide.classList.remove("dragging-nav"),_this2.dragContainer.style.transform="",_this2.dragContainer.style.transition=""}),100)}},{key:"drag",value:function(e){if(this.active){e.preventDefault(),this.slide.classList.add("dragging-nav"),"touchmove"===e.type?(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY):(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var currentXInt=Math.abs(this.currentX),currentYInt=Math.abs(this.currentY);if(currentXInt>0&&currentXInt>=Math.abs(this.currentY)&&(!this.lastDirection||"x"==this.lastDirection)){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var doChange=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&doChange&&(this.doSlideChange=doChange),this.instance.settings.dragAutoSnap&&doChange)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),"right"==doChange&&this.instance.prevSlide(),void("left"==doChange&&this.instance.nextSlide())}if(this.toleranceY>0&&currentYInt>0&&currentYInt>=currentXInt&&(!this.lastDirection||"y"==this.lastDirection)){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var doClose=this.shouldClose();return!this.instance.settings.dragAutoSnap&&doClose&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&doClose&&this.instance.close())}}}},{key:"shouldChange",value:function(){var doChange=!1;if(Math.abs(this.currentX)>=this.toleranceX){var dragDir=this.currentX>0?"right":"left";("left"==dragDir&&this.slide!==this.slide.parentNode.lastChild||"right"==dragDir&&this.slide!==this.slide.parentNode.firstChild)&&(doChange=dragDir)}return doChange}},{key:"shouldClose",value:function(){var doClose=!1;return Math.abs(this.currentY)>=this.toleranceY&&(doClose=!0),doClose}},{key:"setTranslate",value:function(node,xPos,yPos){var animated=arguments.length>3&&void 0!==arguments[3]&&arguments[3];node.style.transition=animated?"all .2s ease":"",node.style.transform="translate3d(".concat(xPos,"px, ").concat(yPos,"px, 0)")}}]),DragSlides}();function slideVideo(slide,data,index,callback){var _this=this,slideContainer=slide.querySelector(".ginner-container"),videoID="gvideo"+index,slideMedia=slide.querySelector(".gslide-media"),videoPlayers=this.getAllPlayers();addClass(slideContainer,"gvideo-container"),slideMedia.insertBefore(createHTML('<div class="gvideo-wrapper"></div>'),slideMedia.firstChild);var videoWrapper=slide.querySelector(".gvideo-wrapper");injectAssets(this.settings.plyr.css,"Plyr");var url=data.href,provider=null==data?void 0:data.videoProvider,customPlaceholder=!1;slideMedia.style.maxWidth=data.width,injectAssets(this.settings.plyr.js,"Plyr",(function(){if(!provider&&url.match(/vimeo\.com\/([0-9]*)/)&&(provider="vimeo"),!provider&&(url.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||url.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||url.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/))&&(provider="youtube"),"local"===provider||!provider){provider="local";var html='<video id="'+videoID+'" ';html+='style="background:#000; max-width: '.concat(data.width,';" '),html+='preload="metadata" ',html+='x-webkit-airplay="allow" ',html+="playsinline ",html+="controls ",html+='class="gvideo-local">',html+='<source src="'.concat(url,'">'),customPlaceholder=createHTML(html+="</video>")}var placeholder=customPlaceholder||createHTML('<div id="'.concat(videoID,'" data-plyr-provider="').concat(provider,'" data-plyr-embed-id="').concat(url,'"></div>'));addClass(videoWrapper,"".concat(provider,"-video gvideo")),videoWrapper.appendChild(placeholder),videoWrapper.setAttribute("data-id",videoID),videoWrapper.setAttribute("data-index",index);var playerConfig=has(_this.settings.plyr,"config")?_this.settings.plyr.config:{},player=new Plyr("#"+videoID,playerConfig);player.on("ready",(function(event){videoPlayers[videoID]=event.detail.plyr,isFunction(callback)&&callback()})),waitUntil((function(){return slide.querySelector("iframe")&&"true"==slide.querySelector("iframe").dataset.ready}),(function(){_this.resize(slide)})),player.on("enterfullscreen",handleMediaFullScreen),player.on("exitfullscreen",handleMediaFullScreen)}))}function handleMediaFullScreen(event){var media=closest(event.target,".gslide-media");"enterfullscreen"===event.type&&addClass(media,"fullscreen"),"exitfullscreen"===event.type&&removeClass(media,"fullscreen")}function slideInline(slide,data,index,callback){var innerContent,_this=this,slideMedia=slide.querySelector(".gslide-media"),hash=!(!has(data,"href")||!data.href)&&data.href.split("#").pop().trim(),content=!(!has(data,"content")||!data.content)&&data.content;if(content&&(isString(content)&&(innerContent=createHTML('<div class="ginlined-content">'.concat(content,"</div>"))),isNode(content))){"none"==content.style.display&&(content.style.display="block");var container=document.createElement("div");container.className="ginlined-content",container.appendChild(content),innerContent=container}if(hash){var div=document.getElementById(hash);if(!div)return!1;var cloned=div.cloneNode(!0);cloned.style.height=data.height,cloned.style.maxWidth=data.width,addClass(cloned,"ginlined-content"),innerContent=cloned}if(!innerContent)return console.error("Unable to append inline slide content",data),!1;slideMedia.style.height=data.height,slideMedia.style.width=data.width,slideMedia.appendChild(innerContent),this.events["inlineclose"+hash]=addEvent("click",{onElement:slideMedia.querySelectorAll(".gtrigger-close"),withCallback:function(e){e.preventDefault(),_this.close()}}),isFunction(callback)&&callback()}function slideIframe(slide,data,index,callback){var slideMedia=slide.querySelector(".gslide-media"),iframe=function(config){var url=config.url,allow=config.allow,callback=config.callback,appendTo=config.appendTo,iframe=document.createElement("iframe");return iframe.className="vimeo-video gvideo",iframe.src=url,iframe.style.width="100%",iframe.style.height="100%",allow&&iframe.setAttribute("allow",allow),iframe.onload=function(){iframe.onload=null,addClass(iframe,"node-ready"),isFunction(callback)&&callback()},appendTo&&appendTo.appendChild(iframe),iframe}({url:data.href,callback:callback});slideMedia.parentNode.style.maxWidth=data.width,slideMedia.parentNode.style.height=data.height,slideMedia.appendChild(iframe)}var SlideConfigParser=function(){function SlideConfigParser(){var slideParamas=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,SlideConfigParser),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},isObject(slideParamas)&&(this.defaults=extend(this.defaults,slideParamas))}return _createClass(SlideConfigParser,[{key:"sourceType",value:function(url){var origin=url;if(null!==(url=url.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/))return"image";if(url.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||url.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||url.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/))return"video";if(url.match(/vimeo\.com\/([0-9]*)/))return"video";if(null!==url.match(/\.(mp4|ogg|webm|mov)/))return"video";if(null!==url.match(/\.(mp3|wav|wma|aac|ogg)/))return"audio";if(url.indexOf("#")>-1&&""!==origin.split("#").pop().trim())return"inline";return url.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(element,settings){var _this=this,data=extend({descPosition:settings.descPosition},this.defaults);if(isObject(element)&&!isNode(element)){has(element,"type")||(has(element,"content")&&element.content?element.type="inline":has(element,"href")&&(element.type=this.sourceType(element.href)));var objectData=extend(data,element);return this.setSize(objectData,settings),objectData}var url="",config=element.getAttribute("data-glightbox"),nodeType=element.nodeName.toLowerCase();if("a"===nodeType&&(url=element.href),"img"===nodeType&&(url=element.src,data.alt=element.alt),data.href=url,each(data,(function(val,key){has(settings,key)&&"width"!==key&&(data[key]=settings[key]);var nodeData=element.dataset[key];isNil(nodeData)||(data[key]=_this.sanitizeValue(nodeData))})),data.content&&(data.type="inline"),!data.type&&url&&(data.type=this.sourceType(url)),isNil(config)){if(!data.title&&"a"==nodeType){var title=element.title;isNil(title)||""===title||(data.title=title)}if(!data.title&&"img"==nodeType){var alt=element.alt;isNil(alt)||""===alt||(data.title=alt)}}else{var cleanKeys=[];each(data,(function(v,k){cleanKeys.push(";\\s?"+k)})),cleanKeys=cleanKeys.join("\\s?:|"),""!==config.trim()&&each(data,(function(val,key){var str=config,regex=new RegExp("s?"+key+"s?:s?(.*?)("+cleanKeys+"s?:|$)"),matches=str.match(regex);if(matches&&matches.length&&matches[1]){var value=matches[1].trim().replace(/;\s*$/,"");data[key]=_this.sanitizeValue(value)}}))}if(data.description&&"."===data.description.substring(0,1)){var description;try{description=document.querySelector(data.description).innerHTML}catch(error){if(!(error instanceof DOMException))throw error}description&&(data.description=description)}if(!data.description){var nodeDesc=element.querySelector(".glightbox-desc");nodeDesc&&(data.description=nodeDesc.innerHTML)}return this.setSize(data,settings,element),this.slideConfig=data,data}},{key:"setSize",value:function(data,settings){var element=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,defaultWith="video"==data.type?this.checkSize(settings.videosWidth):this.checkSize(settings.width),defaultHeight=this.checkSize(settings.height);return data.width=has(data,"width")&&""!==data.width?this.checkSize(data.width):defaultWith,data.height=has(data,"height")&&""!==data.height?this.checkSize(data.height):defaultHeight,element&&"image"==data.type&&(data._hasCustomWidth=!!element.dataset.width,data._hasCustomHeight=!!element.dataset.height),data}},{key:"checkSize",value:function(size){return isNumber(size)?"".concat(size,"px"):size}},{key:"sanitizeValue",value:function(val){return"true"!==val&&"false"!==val?val:"true"===val}}]),SlideConfigParser}(),Slide=function(){function Slide(el,instance,index){_classCallCheck(this,Slide),this.element=el,this.instance=instance,this.index=index}return _createClass(Slide,[{key:"setContent",value:function(){var _this=this,slide=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,callback=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(hasClass(slide,"loaded"))return!1;var settings=this.instance.settings,slideConfig=this.slideConfig,isMobileDevice=isMobile();isFunction(settings.beforeSlideLoad)&&settings.beforeSlideLoad({index:this.index,slide:slide,player:!1});var type=slideConfig.type,position=slideConfig.descPosition,slideMedia=slide.querySelector(".gslide-media"),slideTitle=slide.querySelector(".gslide-title"),slideText=slide.querySelector(".gslide-desc"),slideDesc=slide.querySelector(".gdesc-inner"),finalCallback=callback,titleID="gSlideTitle_"+this.index,textID="gSlideDesc_"+this.index;if(isFunction(settings.afterSlideLoad)&&(finalCallback=function(){isFunction(callback)&&callback(),settings.afterSlideLoad({index:_this.index,slide:slide,player:_this.instance.getSlidePlayerInstance(_this.index)})}),""==slideConfig.title&&""==slideConfig.description?slideDesc&&slideDesc.parentNode.parentNode.removeChild(slideDesc.parentNode):(slideTitle&&""!==slideConfig.title?(slideTitle.id=titleID,slideTitle.innerHTML=slideConfig.title):slideTitle.parentNode.removeChild(slideTitle),slideText&&""!==slideConfig.description?(slideText.id=textID,isMobileDevice&&settings.moreLength>0?(slideConfig.smallDescription=this.slideShortDesc(slideConfig.description,settings.moreLength,settings.moreText),slideText.innerHTML=slideConfig.smallDescription,this.descriptionEvents(slideText,slideConfig)):slideText.innerHTML=slideConfig.description):slideText.parentNode.removeChild(slideText),addClass(slideMedia.parentNode,"desc-".concat(position)),addClass(slideDesc.parentNode,"description-".concat(position))),addClass(slideMedia,"gslide-".concat(type)),addClass(slide,"loaded"),"video"!==type){if("external"!==type)return"inline"===type?(slideInline.apply(this.instance,[slide,slideConfig,this.index,finalCallback]),void(slideConfig.draggable&&new DragSlides({dragEl:slide.querySelector(".gslide-inline"),toleranceX:settings.dragToleranceX,toleranceY:settings.dragToleranceY,slide:slide,instance:this.instance}))):void("image"!==type?isFunction(finalCallback)&&finalCallback():function(slide,data,index,callback){var slideMedia=slide.querySelector(".gslide-media"),img=new Image,titleID="gSlideTitle_"+index,textID="gSlideDesc_"+index;img.addEventListener("load",(function(){isFunction(callback)&&callback()}),!1),img.src=data.href,""!=data.sizes&&""!=data.srcset&&(img.sizes=data.sizes,img.srcset=data.srcset),img.alt="",isNil(data.alt)||""===data.alt||(img.alt=data.alt),""!==data.title&&img.setAttribute("aria-labelledby",titleID),""!==data.description&&img.setAttribute("aria-describedby",textID),data.hasOwnProperty("_hasCustomWidth")&&data._hasCustomWidth&&(img.style.width=data.width),data.hasOwnProperty("_hasCustomHeight")&&data._hasCustomHeight&&(img.style.height=data.height),slideMedia.insertBefore(img,slideMedia.firstChild)}(slide,slideConfig,this.index,(function(){var img=slide.querySelector("img");slideConfig.draggable&&new DragSlides({dragEl:img,toleranceX:settings.dragToleranceX,toleranceY:settings.dragToleranceY,slide:slide,instance:_this.instance}),slideConfig.zoomable&&img.naturalWidth>img.offsetWidth&&(addClass(img,"zoomable"),new ZoomImages(img,slide,(function(){_this.instance.resize()}))),isFunction(finalCallback)&&finalCallback()})));slideIframe.apply(this,[slide,slideConfig,this.index,finalCallback])}else slideVideo.apply(this.instance,[slide,slideConfig,this.index,finalCallback])}},{key:"slideShortDesc",value:function(string){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,wordBoundary=arguments.length>2&&void 0!==arguments[2]&&arguments[2],div=document.createElement("div");div.innerHTML=string;var useWordBoundary=wordBoundary;if((string=div.innerText.trim()).length<=n)return string;var subString=string.substr(0,n-1);return useWordBoundary?(div=null,subString+'... <a href="#" class="desc-more">'+wordBoundary+"</a>"):subString}},{key:"descriptionEvents",value:function(desc,data){var _this2=this,moreLink=desc.querySelector(".desc-more");if(!moreLink)return!1;addEvent("click",{onElement:moreLink,withCallback:function(event,target){event.preventDefault();var body=document.body,desc=closest(target,".gslide-desc");if(!desc)return!1;desc.innerHTML=data.description,addClass(body,"gdesc-open");var shortEvent=addEvent("click",{onElement:[body,closest(desc,".gslide-description")],withCallback:function(event,target){"a"!==event.target.nodeName.toLowerCase()&&(removeClass(body,"gdesc-open"),addClass(body,"gdesc-closed"),desc.innerHTML=data.smallDescription,_this2.descriptionEvents(desc,data),setTimeout((function(){removeClass(body,"gdesc-closed")}),400),shortEvent.destroy())}})}})}},{key:"create",value:function(){return createHTML(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){isNode(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var parser=new SlideConfigParser(this.instance.settings.slideExtraAttributes);return this.slideConfig=parser.parseConfig(this.element,this.instance.settings),this.slideConfig}}]),Slide}(),isMobile$1=isMobile(),isTouch$1=null!==isMobile()||void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,html=document.getElementsByTagName("html")[0],defaults={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:'<div class="gslide">\n    <div class="gslide-inner-content">\n        <div class="ginner-container">\n            <div class="gslide-media">\n            </div>\n            <div class="gslide-description">\n                <div class="gdesc-inner">\n                    <h4 class="gslide-title"></h4>\n                    <div class="gslide-desc"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',lightboxHTML:'<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">\n    <div class="gloader visible"></div>\n    <div class="goverlay"></div>\n    <div class="gcontainer">\n    <div id="glightbox-slider" class="gslider"></div>\n    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>\n    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>\n    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>\n</div>\n</div>'},GlightboxInit=function(){function GlightboxInit(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,GlightboxInit),this.customOptions=options,this.settings=extend(defaults,options),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1}return _createClass(GlightboxInit,[{key:"init",value:function(){var _this=this,selector=this.getSelector();selector&&(this.baseEvents=addEvent("click",{onElement:selector,withCallback:function(e,target){e.preventDefault(),_this.open(target)}})),this.elements=this.getElements()}},{key:"open",value:function(){var element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,startAt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0===this.elements.length)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var index=isNumber(startAt)?startAt:this.settings.startAt;if(isNode(element)){var gallery=element.getAttribute("data-gallery");gallery&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,gallery)),isNil(index)&&(index=this.getElementIndex(element))<0&&(index=0)}isNumber(index)||(index=0),this.build(),animateElement(this.overlay,"none"===this.settings.openEffect?"none":this.settings.cssEfects.fade.in);var body=document.body,scrollBar=window.innerWidth-document.documentElement.clientWidth;if(scrollBar>0){var styleSheet=document.createElement("style");styleSheet.type="text/css",styleSheet.className="gcss-styles",styleSheet.innerText=".gscrollbar-fixer {margin-right: ".concat(scrollBar,"px}"),document.head.appendChild(styleSheet),addClass(body,"gscrollbar-fixer")}addClass(body,"glightbox-open"),addClass(html,"glightbox-open"),isMobile$1&&(addClass(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(index,!0),1===this.elements.length?(addClass(this.prevButton,"glightbox-button-hidden"),addClass(this.nextButton,"glightbox-button-hidden")):(removeClass(this.prevButton,"glightbox-button-hidden"),removeClass(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),isFunction(this.settings.onOpen)&&this.settings.onOpen(),isTouch$1&&this.settings.touchNavigation&&function(instance){if(instance.events.hasOwnProperty("touch"))return!1;var hDistance,vDistance,isInlined,winSize=windowSize(),winWidth=winSize.width,winHeight=winSize.height,process=!1,currentSlide=null,media=null,mediaImage=null,doingMove=!1,initScale=1,currentScale=1,doingZoom=!1,imageZoomed=!1,zoomedPosX=null,zoomedPosY=null,lastZoomedPosX=null,lastZoomedPosY=null,hDistancePercent=0,vDistancePercent=0,vSwipe=!1,hSwipe=!1,startCoords={},endCoords={},xDown=0,yDown=0,sliderWrapper=document.getElementById("glightbox-slider"),overlay=document.querySelector(".goverlay"),touchInstance=new TouchEvents(sliderWrapper,{touchStart:function(e){if(process=!0,(hasClass(e.targetTouches[0].target,"ginner-container")||closest(e.targetTouches[0].target,".gslide-desc")||"a"==e.targetTouches[0].target.nodeName.toLowerCase())&&(process=!1),closest(e.targetTouches[0].target,".gslide-inline")&&!hasClass(e.targetTouches[0].target.parentNode,"gslide-inline")&&(process=!1),process){if(endCoords=e.targetTouches[0],startCoords.pageX=e.targetTouches[0].pageX,startCoords.pageY=e.targetTouches[0].pageY,xDown=e.targetTouches[0].clientX,yDown=e.targetTouches[0].clientY,currentSlide=instance.activeSlide,media=currentSlide.querySelector(".gslide-media"),isInlined=currentSlide.querySelector(".gslide-inline"),mediaImage=null,hasClass(media,"gslide-image")&&(mediaImage=media.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(media=currentSlide.querySelector(".ginner-container")),removeClass(overlay,"greset"),e.pageX>20&&e.pageX<window.innerWidth-20)return;e.preventDefault()}},touchMove:function(e){if(process&&(endCoords=e.targetTouches[0],!doingZoom&&!imageZoomed)){if(isInlined&&isInlined.offsetHeight>winHeight){var moved=startCoords.pageX-endCoords.pageX;if(Math.abs(moved)<=13)return!1}doingMove=!0;var opacity,xUp=e.targetTouches[0].clientX,yUp=e.targetTouches[0].clientY,xDiff=xDown-xUp,yDiff=yDown-yUp;if(Math.abs(xDiff)>Math.abs(yDiff)?(vSwipe=!1,hSwipe=!0):(hSwipe=!1,vSwipe=!0),hDistance=endCoords.pageX-startCoords.pageX,hDistancePercent=100*hDistance/winWidth,vDistance=endCoords.pageY-startCoords.pageY,vDistancePercent=100*vDistance/winHeight,vSwipe&&mediaImage&&(opacity=1-Math.abs(vDistance)/winHeight,overlay.style.opacity=opacity,instance.settings.touchFollowAxis&&(hDistancePercent=0)),hSwipe&&(opacity=1-Math.abs(hDistance)/winWidth,media.style.opacity=opacity,instance.settings.touchFollowAxis&&(vDistancePercent=0)),!mediaImage)return cssTransform(media,"translate3d(".concat(hDistancePercent,"%, 0, 0)"));cssTransform(media,"translate3d(".concat(hDistancePercent,"%, ").concat(vDistancePercent,"%, 0)"))}},touchEnd:function(){if(process){if(doingMove=!1,imageZoomed||doingZoom)return lastZoomedPosX=zoomedPosX,void(lastZoomedPosY=zoomedPosY);var v=Math.abs(parseInt(vDistancePercent)),h=Math.abs(parseInt(hDistancePercent));if(!(v>29&&mediaImage))return v<29&&h<25?(addClass(overlay,"greset"),overlay.style.opacity=1,resetSlideMove(media)):void 0;instance.close()}},multipointEnd:function(){setTimeout((function(){doingZoom=!1}),50)},multipointStart:function(){doingZoom=!0,initScale=currentScale||1},pinch:function(evt){if(!mediaImage||doingMove)return!1;doingZoom=!0,mediaImage.scaleX=mediaImage.scaleY=initScale*evt.zoom;var scale=initScale*evt.zoom;if(imageZoomed=!0,scale<=1)return imageZoomed=!1,scale=1,lastZoomedPosY=null,lastZoomedPosX=null,zoomedPosX=null,zoomedPosY=null,void mediaImage.setAttribute("style","");scale>4.5&&(scale=4.5),mediaImage.style.transform="scale3d(".concat(scale,", ").concat(scale,", 1)"),currentScale=scale},pressMove:function(e){if(imageZoomed&&!doingZoom){var mhDistance=endCoords.pageX-startCoords.pageX,mvDistance=endCoords.pageY-startCoords.pageY;lastZoomedPosX&&(mhDistance+=lastZoomedPosX),lastZoomedPosY&&(mvDistance+=lastZoomedPosY),zoomedPosX=mhDistance,zoomedPosY=mvDistance;var style="translate3d(".concat(mhDistance,"px, ").concat(mvDistance,"px, 0)");currentScale&&(style+=" scale3d(".concat(currentScale,", ").concat(currentScale,", 1)")),cssTransform(mediaImage,style)}},swipe:function(evt){if(!imageZoomed)if(doingZoom)doingZoom=!1;else{if("Left"==evt.direction){if(instance.index==instance.elements.length-1)return resetSlideMove(media);instance.nextSlide()}if("Right"==evt.direction){if(0==instance.index)return resetSlideMove(media);instance.prevSlide()}}}});instance.events.touch=touchInstance}(this),this.settings.keyboardNavigation&&function(instance){if(instance.events.hasOwnProperty("keyboard"))return!1;instance.events.keyboard=addEvent("keydown",{onElement:window,withCallback:function(event,target){var key=(event=event||window.event).keyCode;if(9==key){var focusedButton=document.querySelector(".gbtn.focused");if(!focusedButton){var activeElement=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if("input"==activeElement||"textarea"==activeElement||"button"==activeElement)return}event.preventDefault();var btns=document.querySelectorAll(".gbtn[data-taborder]");if(!btns||btns.length<=0)return;if(!focusedButton){var first=getNextFocusElement();return void(first&&(first.focus(),addClass(first,"focused")))}var nextFocus=getNextFocusElement(focusedButton.getAttribute("data-taborder"));removeClass(focusedButton,"focused"),nextFocus&&(nextFocus.focus(),addClass(nextFocus,"focused"))}39==key&&instance.nextSlide(),37==key&&instance.prevSlide(),27==key&&instance.close()}})}(this)}},{key:"openAt",value:function(){var index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.open(null,index)}},{key:"showSlide",value:function(){var _this2=this,index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,first=arguments.length>1&&void 0!==arguments[1]&&arguments[1];show(this.loader),this.index=parseInt(index);var current=this.slidesContainer.querySelector(".current");current&&removeClass(current,"current"),this.slideAnimateOut();var slideNode=this.slidesContainer.querySelectorAll(".gslide")[index];if(hasClass(slideNode,"loaded"))this.slideAnimateIn(slideNode,first),hide(this.loader);else{show(this.loader);var slide=this.elements[index],slideData={index:this.index,slide:slideNode,slideNode:slideNode,slideConfig:slide.slideConfig,slideIndex:this.index,trigger:slide.node,player:null};this.trigger("slide_before_load",slideData),slide.instance.setContent(slideNode,(function(){hide(_this2.loader),_this2.resize(),_this2.slideAnimateIn(slideNode,first),_this2.trigger("slide_after_load",slideData)}))}this.slideDescription=slideNode.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&hasClass(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(index+1),this.preloadSlide(index-1)),this.updateNavigationClasses(),this.activeSlide=slideNode}},{key:"preloadSlide",value:function(index){var _this3=this;if(index<0||index>this.elements.length-1)return!1;if(isNil(this.elements[index]))return!1;var slideNode=this.slidesContainer.querySelectorAll(".gslide")[index];if(hasClass(slideNode,"loaded"))return!1;var slide=this.elements[index],type=slide.type,slideData={index:index,slide:slideNode,slideNode:slideNode,slideConfig:slide.slideConfig,slideIndex:index,trigger:slide.node,player:null};this.trigger("slide_before_load",slideData),"video"===type||"external"===type?setTimeout((function(){slide.instance.setContent(slideNode,(function(){_this3.trigger("slide_after_load",slideData)}))}),200):slide.instance.setContent(slideNode,(function(){_this3.trigger("slide_after_load",slideData)}))}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var index=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(index<0||index>this.elements.length-1))return!1;index<0?index=this.elements.length-1:index>=this.elements.length&&(index=0),this.showSlide(index)}},{key:"insertSlide",value:function(){var config=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},index=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;index<0&&(index=this.elements.length);var slide=new Slide(config,this,index),data=slide.getConfig(),slideInfo=extend({},data),newSlide=slide.create(),totalSlides=this.elements.length-1;slideInfo.index=index,slideInfo.node=!1,slideInfo.instance=slide,slideInfo.slideConfig=data,this.elements.splice(index,0,slideInfo);var addedSlideNode=null,addedSlidePlayer=null;if(this.slidesContainer){if(index>totalSlides)this.slidesContainer.appendChild(newSlide);else{var existingSlide=this.slidesContainer.querySelectorAll(".gslide")[index];this.slidesContainer.insertBefore(newSlide,existingSlide)}(this.settings.preload&&0==this.index&&0==index||this.index-1==index||this.index+1==index)&&this.preloadSlide(index),0===this.index&&0===index&&(this.index=1),this.updateNavigationClasses(),addedSlideNode=this.slidesContainer.querySelectorAll(".gslide")[index],addedSlidePlayer=this.getSlidePlayerInstance(index),slideInfo.slideNode=addedSlideNode}this.trigger("slide_inserted",{index:index,slide:addedSlideNode,slideNode:addedSlideNode,slideConfig:data,slideIndex:index,trigger:null,player:addedSlidePlayer}),isFunction(this.settings.slideInserted)&&this.settings.slideInserted({index:index,slide:addedSlideNode,player:addedSlidePlayer})}},{key:"removeSlide",value:function(){var index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(index<0||index>this.elements.length-1)return!1;var slide=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[index];slide&&(this.getActiveSlideIndex()==index&&(index==this.elements.length-1?this.prevSlide():this.nextSlide()),slide.parentNode.removeChild(slide)),this.elements.splice(index,1),this.trigger("slide_removed",index),isFunction(this.settings.slideRemoved)&&this.settings.slideRemoved(index)}},{key:"slideAnimateIn",value:function(slide,first){var _this4=this,slideMedia=slide.querySelector(".gslide-media"),slideDesc=slide.querySelector(".gslide-description"),prevData={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:isNil(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:isNil(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},nextData={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(slideMedia.offsetWidth>0&&slideDesc&&(hide(slideDesc),slideDesc.style.display=""),removeClass(slide,this.effectsClasses),first)animateElement(slide,this.settings.cssEfects[this.settings.openEffect].in,(function(){_this4.settings.autoplayVideos&&_this4.slidePlayerPlay(slide),_this4.trigger("slide_changed",{prev:prevData,current:nextData}),isFunction(_this4.settings.afterSlideChange)&&_this4.settings.afterSlideChange.apply(_this4,[prevData,nextData])}));else{var effectName=this.settings.slideEffect,animIn="none"!==effectName?this.settings.cssEfects[effectName].in:effectName;this.prevActiveSlideIndex>this.index&&"slide"==this.settings.slideEffect&&(animIn=this.settings.cssEfects.slideBack.in),animateElement(slide,animIn,(function(){_this4.settings.autoplayVideos&&_this4.slidePlayerPlay(slide),_this4.trigger("slide_changed",{prev:prevData,current:nextData}),isFunction(_this4.settings.afterSlideChange)&&_this4.settings.afterSlideChange.apply(_this4,[prevData,nextData])}))}setTimeout((function(){_this4.resize(slide)}),100),addClass(slide,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var prevSlide=this.prevActiveSlide;removeClass(prevSlide,this.effectsClasses),addClass(prevSlide,"prev");var animation=this.settings.slideEffect,animOut="none"!==animation?this.settings.cssEfects[animation].out:animation;this.slidePlayerPause(prevSlide),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:isNil(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:isNil(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),isFunction(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&"slide"==this.settings.slideEffect&&(animOut=this.settings.cssEfects.slideBack.out),animateElement(prevSlide,animOut,(function(){var container=prevSlide.querySelector(".ginner-container"),media=prevSlide.querySelector(".gslide-media"),desc=prevSlide.querySelector(".gslide-description");container.style.transform="",media.style.transform="",removeClass(media,"greset"),media.style.opacity="",desc&&(desc.style.opacity=""),removeClass(prevSlide,"prev")}))}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(index){var id="gvideo"+index,videoPlayers=this.getAllPlayers();return!(!has(videoPlayers,id)||!videoPlayers[id])&&videoPlayers[id]}},{key:"stopSlideVideo",value:function(slide){if(isNode(slide)){var node=slide.querySelector(".gvideo-wrapper");node&&(slide=node.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var player=this.getSlidePlayerInstance(slide);player&&player.playing&&player.pause()}},{key:"slidePlayerPause",value:function(slide){if(isNode(slide)){var node=slide.querySelector(".gvideo-wrapper");node&&(slide=node.getAttribute("data-index"))}var player=this.getSlidePlayerInstance(slide);player&&player.playing&&player.pause()}},{key:"playSlideVideo",value:function(slide){if(isNode(slide)){var node=slide.querySelector(".gvideo-wrapper");node&&(slide=node.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var player=this.getSlidePlayerInstance(slide);player&&!player.playing&&player.play()}},{key:"slidePlayerPlay",value:function(slide){var _this$settings$plyr$c;if(!isMobile$1||null!==(_this$settings$plyr$c=this.settings.plyr.config)&&void 0!==_this$settings$plyr$c&&_this$settings$plyr$c.muted){if(isNode(slide)){var node=slide.querySelector(".gvideo-wrapper");node&&(slide=node.getAttribute("data-index"))}var player=this.getSlidePlayerInstance(slide);player&&!player.playing&&(player.play(),this.settings.autofocusVideos&&player.elements.container.focus())}}},{key:"setElements",value:function(elements){var _this5=this;this.settings.elements=!1;var newElements=[];elements&&elements.length&&each(elements,(function(el,i){var slide=new Slide(el,_this5,i),data=slide.getConfig(),slideInfo=extend({},data);slideInfo.slideConfig=data,slideInfo.instance=slide,slideInfo.index=i,newElements.push(slideInfo)})),this.elements=newElements,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(each(this.elements,(function(){var slide=createHTML(_this5.settings.slideHTML);_this5.slidesContainer.appendChild(slide)})),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(node){var index=!1;return each(this.elements,(function(el,i){if(has(el,"node")&&el.node==node)return index=i,!0})),index}},{key:"getElements",value:function(){var _this6=this,list=[];this.elements=this.elements?this.elements:[],!isNil(this.settings.elements)&&isArray(this.settings.elements)&&this.settings.elements.length&&each(this.settings.elements,(function(el,i){var slide=new Slide(el,_this6,i),elData=slide.getConfig(),slideInfo=extend({},elData);slideInfo.node=!1,slideInfo.index=i,slideInfo.instance=slide,slideInfo.slideConfig=elData,list.push(slideInfo)}));var nodes=!1;return this.getSelector()&&(nodes=document.querySelectorAll(this.getSelector())),nodes?(each(nodes,(function(el,i){var slide=new Slide(el,_this6,i),elData=slide.getConfig(),slideInfo=extend({},elData);slideInfo.node=el,slideInfo.index=i,slideInfo.instance=slide,slideInfo.slideConfig=elData,slideInfo.gallery=el.getAttribute("data-gallery"),list.push(slideInfo)})),list):list}},{key:"getGalleryElements",value:function(list,gallery){return list.filter((function(el){return el.gallery==gallery}))}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&"data-"==this.settings.selector.substring(0,5)?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var effects=[];for(var key in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(key)){var effect=this.settings.cssEfects[key];effects.push("g".concat(effect.in)),effects.push("g".concat(effect.out))}return effects.join(" ")}},{key:"build",value:function(){var _this7=this;if(this.built)return!1;var children=document.body.childNodes,bodyChildElms=[];each(children,(function(el){el.parentNode==document.body&&"#"!==el.nodeName.charAt(0)&&el.hasAttribute&&!el.hasAttribute("aria-hidden")&&(bodyChildElms.push(el),el.setAttribute("aria-hidden","true"))}));var nextSVG=has(this.settings.svg,"next")?this.settings.svg.next:"",prevSVG=has(this.settings.svg,"prev")?this.settings.svg.prev:"",closeSVG=has(this.settings.svg,"close")?this.settings.svg.close:"",lightboxHTML=this.settings.lightboxHTML;lightboxHTML=createHTML(lightboxHTML=(lightboxHTML=(lightboxHTML=lightboxHTML.replace(/{nextSVG}/g,nextSVG)).replace(/{prevSVG}/g,prevSVG)).replace(/{closeSVG}/g,closeSVG)),document.body.appendChild(lightboxHTML);var modal=document.getElementById("glightbox-body");this.modal=modal;var closeButton=modal.querySelector(".gclose");this.prevButton=modal.querySelector(".gprev"),this.nextButton=modal.querySelector(".gnext"),this.overlay=modal.querySelector(".goverlay"),this.loader=modal.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=bodyChildElms,this.events={},addClass(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&closeButton&&(this.events.close=addEvent("click",{onElement:closeButton,withCallback:function(e,target){e.preventDefault(),_this7.close()}})),closeButton&&!this.settings.closeButton&&closeButton.parentNode.removeChild(closeButton),this.nextButton&&(this.events.next=addEvent("click",{onElement:this.nextButton,withCallback:function(e,target){e.preventDefault(),_this7.nextSlide()}})),this.prevButton&&(this.events.prev=addEvent("click",{onElement:this.prevButton,withCallback:function(e,target){e.preventDefault(),_this7.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=addEvent("click",{onElement:modal,withCallback:function(e,target){_this7.preventOutsideClick||hasClass(document.body,"glightbox-mobile")||closest(e.target,".ginner-container")||closest(e.target,".gbtn")||hasClass(e.target,"gnext")||hasClass(e.target,"gprev")||_this7.close()}})),each(this.elements,(function(slide,i){_this7.slidesContainer.appendChild(slide.instance.create()),slide.slideNode=_this7.slidesContainer.querySelectorAll(".gslide")[i]})),isTouch$1&&addClass(document.body,"glightbox-touch"),this.events.resize=addEvent("resize",{onElement:window,withCallback:function(){_this7.resize()}}),this.built=!0}},{key:"resize",value:function(){var slide=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((slide=slide||this.activeSlide)&&!hasClass(slide,"zoomed")){var winSize=windowSize(),video=slide.querySelector(".gvideo-wrapper"),image=slide.querySelector(".gslide-image"),description=this.slideDescription,winWidth=winSize.width,winHeight=winSize.height;if(winWidth<=768?addClass(document.body,"glightbox-mobile"):removeClass(document.body,"glightbox-mobile"),video||image){var descriptionResize=!1;if(description&&(hasClass(description,"description-bottom")||hasClass(description,"description-top"))&&!hasClass(description,"gabsolute")&&(descriptionResize=!0),image)if(winWidth<=768)image.querySelector("img");else if(descriptionResize){var descHeight=description.offsetHeight,_imgNode=image.querySelector("img");_imgNode.setAttribute("style","max-height: calc(100vh - ".concat(descHeight,"px)")),description.setAttribute("style","max-width: ".concat(_imgNode.offsetWidth,"px;"))}if(video){var ratio=has(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!ratio){var containerWidth=video.clientWidth,containerHeight=video.clientHeight,divisor=containerWidth/containerHeight;ratio="".concat(containerWidth/divisor,":").concat(containerHeight/divisor)}var videoRatio=ratio.split(":"),videoWidth=this.settings.videosWidth,maxWidth=this.settings.videosWidth,maxHeight=(maxWidth=isNumber(videoWidth)||-1!==videoWidth.indexOf("px")?parseInt(videoWidth):-1!==videoWidth.indexOf("vw")?winWidth*parseInt(videoWidth)/100:-1!==videoWidth.indexOf("vh")?winHeight*parseInt(videoWidth)/100:-1!==videoWidth.indexOf("%")?winWidth*parseInt(videoWidth)/100:parseInt(video.clientWidth))/(parseInt(videoRatio[0])/parseInt(videoRatio[1]));if(maxHeight=Math.floor(maxHeight),descriptionResize&&(winHeight-=description.offsetHeight),maxWidth>winWidth||maxHeight>winHeight||winHeight<maxHeight&&winWidth>maxWidth){var vwidth=video.offsetWidth,vheight=video.offsetHeight,_ratio=winHeight/vheight,vsize={width:vwidth*_ratio,height:vheight*_ratio};video.parentNode.setAttribute("style","max-width: ".concat(vsize.width,"px")),descriptionResize&&description.setAttribute("style","max-width: ".concat(vsize.width,"px;"))}else video.parentNode.style.maxWidth="".concat(videoWidth),descriptionResize&&description.setAttribute("style","max-width: ".concat(videoWidth,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var loop=this.loop();removeClass(this.nextButton,"disabled"),removeClass(this.prevButton,"disabled"),0==this.index&&this.elements.length-1==0?(addClass(this.prevButton,"disabled"),addClass(this.nextButton,"disabled")):0!==this.index||loop?this.index!==this.elements.length-1||loop||addClass(this.nextButton,"disabled"):addClass(this.prevButton,"disabled")}},{key:"loop",value:function(){var loop=has(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return loop=has(this.settings,"loop")?this.settings.loop:loop,loop}},{key:"close",value:function(){var _this8=this;if(!this.lightboxOpen){if(this.events){for(var key in this.events)this.events.hasOwnProperty(key)&&this.events[key].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&each(this.bodyHiddenChildElms,(function(el){el.removeAttribute("aria-hidden")})),addClass(this.modal,"glightbox-closing"),animateElement(this.overlay,"none"==this.settings.openEffect?"none":this.settings.cssEfects.fade.out),animateElement(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,(function(){if(_this8.activeSlide=null,_this8.prevActiveSlideIndex=null,_this8.prevActiveSlide=null,_this8.built=!1,_this8.events){for(var _key in _this8.events)_this8.events.hasOwnProperty(_key)&&_this8.events[_key].destroy();_this8.events=null}var body=document.body;removeClass(html,"glightbox-open"),removeClass(body,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),_this8.modal.parentNode.removeChild(_this8.modal),_this8.trigger("close"),isFunction(_this8.settings.onClose)&&_this8.settings.onClose();var styles=document.querySelector(".gcss-styles");styles&&styles.parentNode.removeChild(styles),_this8.lightboxOpen=!1,_this8.closing=null}))}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(evt,callback){var once=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!evt||!isFunction(callback))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:evt,once:once,callback:callback})}},{key:"once",value:function(evt,callback){this.on(evt,callback,!0)}},{key:"trigger",value:function(eventName){var _this9=this,data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,onceTriggered=[];each(this.apiEvents,(function(event,i){var evt=event.evt,once=event.once,callback=event.callback;evt==eventName&&(callback(data),once&&onceTriggered.push(i))})),onceTriggered.length&&each(onceTriggered,(function(i){return _this9.apiEvents.splice(i,1)}))}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.1.0"}}]),GlightboxInit}();return function(){var instance=new GlightboxInit(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return instance.init(),instance}}));